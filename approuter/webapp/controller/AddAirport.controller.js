sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/core/BusyIndicator"],function(e,t,o,r){"use strict";return e.extend("ui5.rest.restwithui5.controller.AddAirport",{onInit:function(){console.log("Controller of AddAirport fired");this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("addAirport").attachPatternMatched(this.onPatternMatched,this);this.globalContext=this.getOwnerComponent().getModel();this.DataRepository=this.getOwnerComponent().DataRepository},onPatternMatched:function(e){console.log("onPatternMatched called");const t=this.globalContext.getProperty("/user/userType");console.log(t);this.getView().setModel(new o({}),"formModel");this.getView().setModel(new o({}),"airportsModel")},addAirportButtonPress:function(){console.log("addAirportButtonPress clicked...");const e=this.getView().getModel("formModel");const s=e.getData();if(Object.keys(s).length<8){t.show("All fields are mandatory");return}r.show();this.DataRepository.createAirport(s)().then(e=>{r.hide();console.log("Data saved successfully:",e);t.show("Airport added successfully!");const s=this.getView().getModel("airportsModel").getProperty("/airports");s.push({...e,edit:false});this.getView().getModel("airportsModel").setProperty("/airports",s);this.getView().setModel(new o({}),"formModel")}).catch(o=>{console.error("error",o);if(o&&o.responseJSON){e.setProperty("/errors",o.responseJSON);console.log("Errors set in form model:",e.getProperty("/errors"))}else{console.error("Unexpected error format:",o);t.show("Failed to add airport due to unexpected error.")}r.hide()})}})});
//# sourceMappingURL=AddAirport.controller.js.map