sap.ui.define(["sap/ui/core/mvc/Controller","ui5/rest/restwithui5/model/DataRepository","sap/ui/model/json/JSONModel","sap/m/MessageToast"],(e,t,o,r)=>{"use strict";return e.extend("ui5.rest.restwithui5.controller.Form",{onInit:function(){var e=new o({EntryCollection:[{Author:"Alexandrina Victoria",AuthorPicUrl:"test-resources/sap/m/images/dronning_victoria.jpg",Type:"Request",Date:"March 03 2013",Actions:[{Text:"Delete",Icon:"sap-icon://delete",Key:"delete"},{Text:"Share",Icon:"sap-icon://share-2",Key:"share"},{Text:"Edit",Icon:"sap-icon://edit",Key:"edit"}],Text:"Lorem <strong>ipsum dolor sit amet</strong>, <em>consetetur sadipscing elitr</em>, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, <a href='http://www.sap.com'>sed diam voluptua</a>. At vero eos et accusam et justo duo dolores et ea rebum.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod <strong>tempor invidunt ut labore et dolore magna</strong> aliquyam erat, sed diam voluptua. <em>At vero eos et accusam et justo</em> duo dolores et ea rebum. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, seddiamnonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, <u>sed diam nonumy eirmod tempor invidunt ut labore</u> et dolore magna aliquyam erat, sed diam voluptua. <strong>At vero eos et accusam</strong> et justo duo dolores et ea rebum. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod <a href='//www.sap.com'>tempor invidunt</a> ut labore et dolore magna aliquyam erat, sed diam voluptua. <em>At vero eos et accusam</em> et justo duo dolores et ea rebum. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum."},{Author:"George Washington",AuthorPicUrl:"test-resources/sap/m/images/george_washington.jpg",Type:"Reply",Date:"March 04 2013",Text:"Lorem ipsum dolor sit <a href='http://www.sap.com'>amet</a>, consetetur sadipscing elitr, <em>sed diam</em> nonumy <strong>eirmod tempor</strong> invidunt ut labore"},{Author:"Alexandrina Victoria",AuthorPicUrl:"test-resources/sap/m/images/dronning_victoria.jpg",Type:"Request",Date:"March 05 2013",Text:"Lorem ipsum dolor sit amet, <u>consetetur sadipscing elitr</u>, sed diam nonumy eirmod tempor <strong>invidunt ut labore et dolore magna</strong> aliquyam erat",Actions:[{Text:"Delete",Icon:"sap-icon://delete",Key:"delete"},{Text:"Share",Icon:"sap-icon://share-2",Key:"share"},{Text:"Edit",Icon:"sap-icon://edit",Key:"edit"}]},{Author:"George Washington",AuthorPicUrl:"test-resources/sap/m/images/george_washington.jpg",Type:"Rejection",Date:"March 07 2013",Text:"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, www.sap.com sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."}]});this.getOwnerComponent().setModel(e,"feed");console.log("called",this.getOwnerComponent().getModel());const t=["Ola","Hello","Namaste"];this.DataRepository=this.getOwnerComponent().DataRepository;const r=this._getRandomInt(t.length);console.log("RandomIndex is ",r);const s={greetings:t[r]};const i=new o(s);const n=this.getView().byId("departureDate");n.setMinDate(new Date);this.getView().setModel(i,"data")},onSuggest:function(e){var t=this.getOwnerComponent().DataRepository;const o=e.getSource();const r=o.getId();const s=this.getView().byId(r);const i=o.getValue();const n=this.getView().getModel();const a=n.getProperty("/"+r);if(i.length>1&&a!=i){t.searchAirport(i);s.suggest();n.setProperty("/"+r,i)}},onSearchFlightsButtonPress:function(){const e=this.getView();const t=this.getView().getModel();const o=this.getOwnerComponent().getModel();const s=e.byId("searchSrcAirport").getValue();const i=e.byId("searchDestAirport").getValue();const n=this._getCodeFromAirportString(s);const a=this._getCodeFromAirportString(i);const u=e.byId("departureDate").getValue();const d=u.split("/").reverse().join("-");console.log(new Date(u),(new Date).getDate()-1);if(new Date(u)<(new Date).getDate()-1){r.show("Date cannot be in the past",{duration:3e3});return}if(s.length===0){r.show("Source Airport is required");return}if(i.length===0){r.show("Destination Airport is required");return}if(a==n){r.show("Source and destination airport cannot be same");return}if(!u){r.show("Journey Date is required");return}Promise.all([this.DataRepository.getAirport(n),this.DataRepository.getAirport(a)]).then(([e,t])=>{console.log("source Airport",e);if(!e){r.show("Source Airport couldn't be found!");return}if(!t){console.log("Destination Airport",t);r.show("Destination Airport couldn't be found!");return}o.setProperty("/destAirport",t);o.setProperty("/srcAirport",e);this._redirectToSearchFlights(n,a,d)}).catch(e=>{console.log("Error in formController",e);r.show(e.responseJSON.message)})},_redirectToSearchFlights:function(e,t,o){const r=this.getOwnerComponent().getRouter();r.navTo("searchFlights",{srcCode:e,destCode:t,date:o})},onButtonPress:function(){console.log("called");const e=this.getOwnerComponent().getRouter();e.navTo("detail")},_getCodeFromAirportString:function(e){const t=e.split("(");const o=t[t.length-1];return o.slice(0,o.length-1)},_getRandomInt:function(e){return Math.floor(Math.random()*e)}})});
//# sourceMappingURL=Form.controller.js.map